2021-06-26 00:01:12.107.-04:00 [INF] Application is Starting
2021-06-26 00:01:13.417.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:01:13.890.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:01:13.890.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:01:13.890.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:01:13.890.-04:00 [INF] Hosting environment: Development
2021-06-26 00:01:13.890.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:01:15.104.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:01:15.192.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 89.8838ms
2021-06-26 00:01:15.396.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:01:15.483.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 86.6174ms
2021-06-26 00:01:37.638.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:01:37.644.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:01:37.788.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:01:37.824.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:01:38.285.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:01:38.913.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:01:39.571.-04:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:01:39.732.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:01:39.832.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:01:39.873.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2044.4623ms
2021-06-26 00:01:39.874.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:01:39.878.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 364 application/json;+charset=utf-8 2239.8952ms
2021-06-26 00:02:03.852.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:02:03.906.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:02:03.940.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 00:02:03.944.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:02:03.952.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:02:03.952.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 100.2270ms
2021-06-26 00:03:27.616.-04:00 [INF] Application is Starting
2021-06-26 00:03:29.017.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:03:29.507.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:03:29.507.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:03:29.508.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:03:29.508.-04:00 [INF] Hosting environment: Development
2021-06-26 00:03:29.508.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:03:30.737.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:03:30.844.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 109.7017ms
2021-06-26 00:03:31.072.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:03:31.153.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 81.2794ms
2021-06-26 00:03:48.168.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:03:48.174.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:03:48.293.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:03:48.327.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:03:48.793.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:03:49.434.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:03:50.077.-04:00 [INF] Executed DbCommand (48ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:03:50.238.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:03:50.333.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:03:50.373.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2041.0444ms
2021-06-26 00:03:50.374.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:03:50.379.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 377 application/json;+charset=utf-8 2210.6538ms
2021-06-26 00:04:11.612.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:04:11.666.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:04:11.697.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 00:04:11.701.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:04:11.708.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:04:11.708.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 96.2185ms
2021-06-26 00:11:06.876.-04:00 [INF] Application is Starting
2021-06-26 00:11:08.256.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:11:08.713.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:11:08.713.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:11:08.714.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:11:08.714.-04:00 [INF] Hosting environment: Development
2021-06-26 00:11:08.714.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:11:09.904.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:11:10.005.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 103.1646ms
2021-06-26 00:11:10.227.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:11:10.316.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 89.2006ms
2021-06-26 00:11:25.548.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:11:25.553.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:11:25.702.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:11:25.738.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:11:26.160.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:11:26.765.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:11:27.372.-04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:11:27.547.-04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:11:27.643.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:11:27.682.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 1940.7577ms
2021-06-26 00:11:27.683.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:11:27.688.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 391 application/json;+charset=utf-8 2140.0734ms
2021-06-26 00:11:38.647.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:11:38.699.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:11:38.729.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 00:11:38.734.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:11:38.741.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:11:38.741.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 94.4340ms
2021-06-26 00:13:46.666.-04:00 [INF] Application is Starting
2021-06-26 00:13:48.003.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:13:48.449.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:13:48.449.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:13:48.449.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:13:48.449.-04:00 [INF] Hosting environment: Development
2021-06-26 00:13:48.449.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:13:49.689.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:13:49.785.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 97.3162ms
2021-06-26 00:13:49.994.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:13:50.094.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 100.7612ms
2021-06-26 00:13:58.172.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:13:58.177.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:13:58.319.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:13:58.356.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:13:58.816.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:13:59.488.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:14:00.152.-04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:14:00.319.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:14:00.415.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:14:00.454.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2094.6332ms
2021-06-26 00:14:00.455.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:14:00.460.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 396 application/json;+charset=utf-8 2287.9207ms
2021-06-26 00:14:18.719.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:14:18.771.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:14:18.805.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 00:14:18.810.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:14:18.817.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:14:18.817.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 98.5688ms
2021-06-26 00:16:05.571.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:16:05.573.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:16:05.573.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 00:16:05.573.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:16:05.619.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:16:05.619.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 48.1176ms
2021-06-26 00:18:27.976.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:18:27.977.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:18:27.977.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 00:18:27.978.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:18:27.978.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:18:27.978.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 1.6624ms
2021-06-26 00:20:54.482.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:20:54.483.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:20:54.483.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-06-26 00:20:54.484.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:20:54.484.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:20:54.484.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 1.9186ms
2021-06-26 00:21:05.721.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:21:05.722.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:21:05.722.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-06-26 00:21:05.722.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:21:05.722.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:21:05.722.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 0.8502ms
2021-06-26 00:21:37.140.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 00:21:37.140.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:21:37.140.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:21:37.140.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 0.4181ms
2021-06-26 00:21:54.198.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:21:54.198.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:21:54.199.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:21:54.199.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:21:54.201.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:21:54.226.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:21:54.415.-04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:21:54.431.-04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:21:54.432.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:21:54.432.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 232.6796ms
2021-06-26 00:21:54.432.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:21:54.432.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 396 application/json;+charset=utf-8 234.1529ms
2021-06-26 00:22:27.850.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:22:27.851.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:22:27.851.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 00:22:27.851.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:22:27.851.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:22:27.852.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 1.1558ms
2021-06-26 00:22:54.851.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 00:22:54.852.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:22:54.852.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:22:54.852.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 0.9217ms
2021-06-26 00:23:15.446.-04:00 [INF] Application is Starting
2021-06-26 00:23:16.697.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:23:17.128.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:23:17.128.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:23:17.129.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:23:17.129.-04:00 [INF] Hosting environment: Development
2021-06-26 00:23:17.129.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:23:18.305.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:23:18.400.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 97.0630ms
2021-06-26 00:23:18.620.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:23:18.714.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 92.2793ms
2021-06-26 00:23:30.532.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:23:30.538.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:23:30.664.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:23:30.699.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:23:31.163.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:23:31.809.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:23:32.459.-04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:23:32.633.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:23:32.729.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:23:32.769.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2065.2964ms
2021-06-26 00:23:32.770.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:23:32.775.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 349 application/json;+charset=utf-8 2242.7503ms
2021-06-26 00:23:58.046.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:23:58.055.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:23:58.060.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:23:58.060.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 14.5185ms
2021-06-26 00:24:37.743.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 00:24:37.745.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:24:37.745.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:24:37.745.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 2.1696ms
2021-06-26 00:25:03.642.-04:00 [INF] Application is Starting
2021-06-26 00:25:05.036.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:25:05.477.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:25:05.477.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:25:05.477.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:25:05.478.-04:00 [INF] Hosting environment: Development
2021-06-26 00:25:05.478.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:25:06.661.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:25:06.759.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 101.1549ms
2021-06-26 00:25:06.776.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/swagger-ui-bundle.js - -
2021-06-26 00:25:06.779.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/swagger-ui.css - -
2021-06-26 00:25:06.881.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/swagger-ui-standalone-preset.js - -
2021-06-26 00:25:07.001.-04:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2021-06-26 00:25:07.001.-04:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2021-06-26 00:25:07.001.-04:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2021-06-26 00:25:07.003.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/swagger-ui-bundle.js - - - 200 986342 application/javascript 227.1272ms
2021-06-26 00:25:07.003.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/swagger-ui-standalone-preset.js - - - 200 311804 application/javascript 122.0955ms
2021-06-26 00:25:07.003.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/swagger-ui.css - - - 200 142933 text/css 223.9404ms
2021-06-26 00:25:07.174.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:25:07.263.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 89.6260ms
2021-06-26 00:25:50.996.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:25:51.000.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:25:51.179.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:25:51.215.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:25:51.673.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:25:52.292.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:25:52.928.-04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:25:53.087.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:25:53.181.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:25:53.218.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 1999.0323ms
2021-06-26 00:25:53.219.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:25:53.222.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 349 application/json;+charset=utf-8 2226.5739ms
2021-06-26 00:26:20.766.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 00:26:20.819.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:26:20.824.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:26:20.824.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 57.3401ms
2021-06-26 00:27:18.933.-04:00 [INF] Application is Starting
2021-06-26 00:27:20.212.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:27:20.628.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:27:20.628.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:27:20.628.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:27:20.628.-04:00 [INF] Hosting environment: Development
2021-06-26 00:27:20.628.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:27:21.857.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:27:21.950.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 95.1249ms
2021-06-26 00:27:22.226.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:27:22.322.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 96.6631ms
2021-06-26 00:27:29.258.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:27:29.264.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:27:29.386.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:27:29.422.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:27:29.877.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:27:30.498.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:27:31.151.-04:00 [INF] Executed DbCommand (46ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:27:31.330.-04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:27:31.429.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:27:31.472.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2045.1792ms
2021-06-26 00:27:31.472.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:27:31.478.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 349 application/json;+charset=utf-8 2220.1461ms
2021-06-26 00:28:12.364.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 00:28:12.377.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:28:12.382.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:28:12.383.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 18.9120ms
2021-06-26 00:29:07.801.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:29:07.806.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:29:07.809.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:29:07.809.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 8.4932ms
2021-06-26 00:29:37.419.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:29:37.420.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:29:37.420.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:29:37.420.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 1.3982ms
2021-06-26 00:30:23.531.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:30:23.532.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:30:23.533.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:30:23.533.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 1.3906ms
2021-06-26 00:30:25.150.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:30:25.150.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:30:25.150.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:30:25.150.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 0.3741ms
2021-06-26 00:30:28.225.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 00:30:28.225.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:30:28.225.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:30:28.225.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 0.4137ms
2021-06-26 00:32:15.228.-04:00 [INF] Application is Starting
2021-06-26 00:32:16.619.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:32:17.097.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:32:17.097.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:32:17.097.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:32:17.097.-04:00 [INF] Hosting environment: Development
2021-06-26 00:32:17.097.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:32:18.213.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:32:18.312.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 101.2348ms
2021-06-26 00:32:18.566.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:32:18.660.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 93.8519ms
2021-06-26 00:32:31.089.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:32:31.094.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:32:31.217.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:32:31.252.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:32:31.711.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:32:32.337.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:32:32.979.-04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:32:33.147.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:32:33.240.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:32:33.280.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2023.1465ms
2021-06-26 00:32:33.280.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:32:33.285.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 349 application/json;+charset=utf-8 2196.1462ms
2021-06-26 00:33:11.002.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Country/2 - -
2021-06-26 00:33:11.010.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.CountryController.GetCountry (HotelListing)'
2021-06-26 00:33:11.014.-04:00 [INF] Route matched with {action = "GetCountry", controller = "Country"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountry(Int32) on controller HotelListing.Controllers.CountryController (HotelListing).
2021-06-26 00:33:11.042.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:33:11.114.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [t].[ShortName], [h].[Id], [h].[Address], [h].[CountryId], [h].[Name], [h].[Rating]
FROM (
    SELECT TOP(1) [c].[Id], [c].[Name], [c].[ShortName]
    FROM [Countries] AS [c]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN [Hotels] AS [h] ON [t].[Id] = [h].[CountryId]
ORDER BY [t].[Id], [h].[Id]
2021-06-26 00:33:11.147.-04:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.Models.CountryDTO'.
2021-06-26 00:33:11.160.-04:00 [INF] Executed action HotelListing.Controllers.CountryController.GetCountry (HotelListing) in 145.7131ms
2021-06-26 00:33:11.160.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.CountryController.GetCountry (HotelListing)'
2021-06-26 00:33:11.160.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Country/2 - - - 200 97 application/json;+charset=utf-8 158.8062ms
2021-06-26 00:33:41.862.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:33:41.921.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:33:41.961.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-06-26 00:33:41.965.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:33:41.972.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:33:41.972.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 110.0295ms
2021-06-26 00:33:53.010.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:33:53.014.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:33:53.014.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 00:33:53.014.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:33:53.015.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:33:53.015.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 4.9558ms
2021-06-26 00:34:15.177.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 00:34:15.178.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:34:15.178.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:34:15.179.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 1.0585ms
2021-06-26 00:35:00.116.-04:00 [INF] Application is Starting
2021-06-26 00:35:01.452.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:35:01.925.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:35:01.925.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:35:01.925.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:35:01.925.-04:00 [INF] Hosting environment: Development
2021-06-26 00:35:01.925.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:35:03.121.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:35:03.218.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 98.0896ms
2021-06-26 00:35:03.448.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:35:03.540.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 92.3134ms
2021-06-26 00:35:11.682.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:35:11.688.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:35:11.804.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:35:11.836.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:35:12.282.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:35:12.899.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:35:13.547.-04:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:35:13.719.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:35:13.814.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:35:13.853.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2012.9187ms
2021-06-26 00:35:13.854.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:35:13.859.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 349 application/json;+charset=utf-8 2176.7503ms
2021-06-26 00:36:58.666.-04:00 [INF] Application is Starting
2021-06-26 00:37:00.018.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:37:00.462.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:37:00.462.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:37:00.463.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:37:00.463.-04:00 [INF] Hosting environment: Development
2021-06-26 00:37:00.463.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:37:01.643.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:37:01.739.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 98.2027ms
2021-06-26 00:37:01.957.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:37:02.045.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 87.5401ms
2021-06-26 00:37:11.151.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:37:11.158.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:37:11.277.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:37:11.311.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:37:11.734.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:37:12.424.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:37:13.063.-04:00 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:37:13.229.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:38:05.543.-04:00 [INF] Application is Starting
2021-06-26 00:38:06.915.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:38:07.337.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:38:07.337.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:38:07.337.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:38:07.337.-04:00 [INF] Hosting environment: Development
2021-06-26 00:38:07.337.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:38:08.571.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:38:08.666.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 97.2687ms
2021-06-26 00:38:08.898.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:38:09.013.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 115.3746ms
2021-06-26 00:38:14.748.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:38:14.754.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:38:14.875.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:38:14.911.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:38:15.377.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:38:16.073.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:38:16.795.-04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:38:16.958.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:39:59.817.-04:00 [INF] Application is Starting
2021-06-26 00:40:01.172.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:40:01.610.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:40:01.610.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:40:01.610.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:40:01.611.-04:00 [INF] Hosting environment: Development
2021-06-26 00:40:01.611.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:40:02.866.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:40:02.967.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 104.0301ms
2021-06-26 00:40:03.200.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:40:03.308.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 108.3706ms
2021-06-26 00:40:09.815.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:40:09.820.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:40:09.945.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:40:09.981.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:40:10.439.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:40:11.170.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:40:11.871.-04:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:40:12.058.-04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:40:22.670.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:40:22.711.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 12724.0805ms
2021-06-26 00:40:22.712.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:40:22.717.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 349 application/json;+charset=utf-8 12901.7179ms
2021-06-26 00:40:43.188.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:40:43.241.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:40:43.275.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 00:40:43.279.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:40:43.286.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:40:43.287.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 98.9171ms
2021-06-26 00:40:56.437.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/3 - -
2021-06-26 00:40:56.438.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:40:56.438.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:40:56.438.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/3 - - - 401 0 - 1.7578ms
2021-06-26 00:41:14.345.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 00:41:14.393.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:41:14.393.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:41:14.393.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 48.6171ms
2021-06-26 00:45:43.301.-04:00 [INF] Application is Starting
2021-06-26 00:45:44.634.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:45:45.098.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:45:45.099.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:45:45.099.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:45:45.099.-04:00 [INF] Hosting environment: Development
2021-06-26 00:45:45.099.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:45:46.315.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:45:46.409.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 95.7970ms
2021-06-26 00:45:46.609.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:45:46.700.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 91.2521ms
2021-06-26 00:45:55.132.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:45:55.138.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:45:55.288.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:45:55.322.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:45:55.786.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:45:56.409.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:45:57.049.-04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:45:57.203.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:45:57.349.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:45:57.383.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2056.7616ms
2021-06-26 00:45:57.384.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:45:57.388.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 381 application/json;+charset=utf-8 2255.8793ms
2021-06-26 00:46:23.872.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:46:23.926.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 00:46:23.960.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 00:46:23.965.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:46:23.972.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:46:23.972.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 99.7239ms
2021-06-26 00:53:25.104.-04:00 [INF] Application is Starting
2021-06-26 00:53:26.445.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:53:26.959.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:53:26.959.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:53:26.960.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:53:26.960.-04:00 [INF] Hosting environment: Development
2021-06-26 00:53:26.960.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:53:28.153.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:53:28.249.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 97.7423ms
2021-06-26 00:53:28.478.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:53:28.567.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 88.9224ms
2021-06-26 00:53:36.535.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:53:36.541.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:53:36.669.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:53:36.703.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:53:37.159.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:53:37.794.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:53:38.445.-04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:53:38.606.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:53:38.706.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:53:38.747.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2039.6003ms
2021-06-26 00:53:38.748.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:53:38.753.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 392 application/json;+charset=utf-8 2218.2453ms
2021-06-26 00:53:49.641.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 00:53:49.649.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:53:49.653.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:53:49.654.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 12.3627ms
2021-06-26 00:56:59.229.-04:00 [INF] Application is Starting
2021-06-26 00:57:00.640.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:57:01.150.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:57:01.150.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:57:01.150.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:57:01.150.-04:00 [INF] Hosting environment: Development
2021-06-26 00:57:01.151.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:57:02.381.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:57:02.472.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 92.2085ms
2021-06-26 00:57:02.680.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:57:02.767.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 87.4120ms
2021-06-26 00:57:12.143.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:57:12.149.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:57:12.290.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:57:12.324.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:57:12.771.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:57:13.405.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:57:14.066.-04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:57:14.228.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:57:14.325.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:57:14.366.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2036.7127ms
2021-06-26 00:57:14.367.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:57:14.372.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 367 application/json;+charset=utf-8 2228.4795ms
2021-06-26 00:57:25.678.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 00:57:25.685.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:57:25.690.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:57:25.690.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 12.4682ms
2021-06-26 00:58:05.378.-04:00 [INF] Application is Starting
2021-06-26 00:58:06.733.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 00:58:07.161.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 00:58:07.161.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 00:58:07.162.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 00:58:07.162.-04:00 [INF] Hosting environment: Development
2021-06-26 00:58:07.162.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 00:58:08.426.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 00:58:08.525.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 101.2974ms
2021-06-26 00:58:08.735.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 00:58:08.821.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 86.0575ms
2021-06-26 00:59:19.970.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 00:59:19.976.-04:00 [INF] CORS policy execution successful.
2021-06-26 00:59:20.120.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:59:20.156.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 00:59:20.596.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 00:59:21.208.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 00:59:21.874.-04:00 [INF] Executed DbCommand (46ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 00:59:22.024.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 00:59:22.110.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 00:59:22.144.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 1984.3521ms
2021-06-26 00:59:22.145.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 00:59:22.149.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 367 application/json;+charset=utf-8 2182.7181ms
2021-06-26 00:59:44.414.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 00:59:44.426.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 00:59:44.430.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 00:59:44.431.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 17.0811ms
2021-06-26 01:00:01.692.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 01:00:01.744.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 01:00:01.779.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 01:00:01.779.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:00:01.782.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:00:01.782.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 90.3705ms
2021-06-26 01:00:05.695.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 01:00:05.696.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 01:00:05.696.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 01:00:05.696.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:00:05.697.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:00:05.697.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 1.6814ms
2021-06-26 01:04:43.048.-04:00 [INF] Application is Starting
2021-06-26 01:04:44.466.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:04:44.912.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 01:04:44.912.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 01:04:44.912.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 01:04:44.912.-04:00 [INF] Hosting environment: Development
2021-06-26 01:04:44.912.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 01:04:46.175.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 01:04:46.271.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 97.2327ms
2021-06-26 01:04:46.488.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 01:04:46.583.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 95.5118ms
2021-06-26 01:04:57.350.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 01:04:57.356.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:04:57.505.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 01:04:57.540.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 01:04:58.014.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 01:04:58.716.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 01:04:59.388.-04:00 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 01:04:59.545.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 01:04:59.634.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 01:04:59.674.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2130.0137ms
2021-06-26 01:04:59.675.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 01:04:59.680.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 381 application/json;+charset=utf-8 2330.5045ms
2021-06-26 01:05:20.615.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Country/1 - -
2021-06-26 01:05:20.624.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.CountryController.GetCountry (HotelListing)'
2021-06-26 01:05:20.627.-04:00 [INF] Route matched with {action = "GetCountry", controller = "Country"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountry(Int32) on controller HotelListing.Controllers.CountryController (HotelListing).
2021-06-26 01:05:20.656.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 01:05:20.742.-04:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [t].[ShortName], [h].[Id], [h].[Address], [h].[CountryId], [h].[Name], [h].[Rating]
FROM (
    SELECT TOP(1) [c].[Id], [c].[Name], [c].[ShortName]
    FROM [Countries] AS [c]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN [Hotels] AS [h] ON [t].[Id] = [h].[CountryId]
ORDER BY [t].[Id], [h].[Id]
2021-06-26 01:05:20.777.-04:00 [INF] Executing OkObjectResult, writing value of type 'HotelListing.Models.CountryDTO'.
2021-06-26 01:05:20.790.-04:00 [INF] Executed action HotelListing.Controllers.CountryController.GetCountry (HotelListing) in 162.3103ms
2021-06-26 01:05:20.790.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.CountryController.GetCountry (HotelListing)'
2021-06-26 01:05:20.790.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Country/1 - - - 200 111 application/json;+charset=utf-8 201.0872ms
2021-06-26 01:05:29.919.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 01:05:29.974.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 01:05:30.009.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 01:05:30.013.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:05:30.019.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:05:30.020.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 100.5110ms
2021-06-26 01:05:35.415.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 01:05:35.415.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 01:05:35.415.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 01:05:35.416.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:05:35.416.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:05:35.416.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 1.3197ms
2021-06-26 01:05:46.610.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 01:05:46.610.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:05:46.611.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:05:46.611.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 1.0112ms
2021-06-26 01:07:08.927.-04:00 [INF] Application is Starting
2021-06-26 01:07:10.450.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:07:10.950.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 01:07:10.950.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 01:07:10.950.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 01:07:10.950.-04:00 [INF] Hosting environment: Development
2021-06-26 01:07:10.950.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 01:07:12.106.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 01:07:12.202.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 98.2355ms
2021-06-26 01:07:12.430.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 01:07:12.526.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 96.1998ms
2021-06-26 01:07:22.141.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 01:07:22.147.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:07:22.268.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 01:07:22.306.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 01:07:22.731.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 01:07:23.428.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 01:07:24.104.-04:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 01:07:24.289.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 01:07:24.398.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 01:07:24.441.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2130.9146ms
2021-06-26 01:07:24.442.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 01:07:24.448.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 397 application/json;+charset=utf-8 2306.8541ms
2021-06-26 01:07:35.134.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 01:07:35.143.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:07:35.149.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:07:35.149.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 15.0327ms
2021-06-26 01:07:55.776.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 01:07:55.828.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 01:07:55.861.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 01:07:55.861.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:07:55.863.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:07:55.864.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 87.7671ms
2021-06-26 01:08:00.637.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 01:08:00.638.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 01:08:00.638.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 01:08:00.639.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:08:00.639.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:08:00.639.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 1.5462ms
2021-06-26 01:17:56.391.-04:00 [INF] Application is Starting
2021-06-26 01:17:57.840.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:17:58.329.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 01:17:58.329.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 01:17:58.330.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 01:17:58.330.-04:00 [INF] Hosting environment: Development
2021-06-26 01:17:58.330.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 01:17:59.573.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 01:17:59.661.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 90.2082ms
2021-06-26 01:17:59.884.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 01:17:59.978.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 91.6086ms
2021-06-26 01:18:14.975.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 01:18:14.981.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:18:15.155.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 01:18:15.191.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 01:18:15.665.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 01:18:16.321.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 01:18:16.968.-04:00 [INF] Executed DbCommand (45ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 01:18:17.130.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 01:18:17.255.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 01:18:17.296.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2100.0626ms
2021-06-26 01:18:17.296.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 01:18:17.301.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 381 application/json;+charset=utf-8 2326.0406ms
2021-06-26 01:18:26.391.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 01:18:26.399.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:18:26.403.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:18:26.403.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 12.6589ms
2021-06-26 01:18:38.225.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 01:18:38.278.-04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateAudience(IEnumerable`1 audiences, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-06-26 01:18:38.311.-04:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2021-06-26 01:18:38.311.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:18:38.314.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:18:38.314.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 89.6873ms
2021-06-26 01:25:27.188.-04:00 [INF] Application is Starting
2021-06-26 01:25:28.581.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:25:28.815.-04:00 [FTL] Application startup exception
System.InvalidOperationException: Scheme already exists: Bearer
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__0(AuthenticationOptions o)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.<>c__DisplayClass5_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsManager`1.Get(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2021-06-26 01:25:28.957.-04:00 [FTL] Application failed to start
System.InvalidOperationException: Scheme already exists: Bearer
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__0(AuthenticationOptions o)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.<>c__DisplayClass5_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsManager`1.Get(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at HotelListing.Program.Main(String[] args) in /Users/marksweitzer/Sites/c#/HotelListing/HotelListing/Program.cs:line 28
2021-06-26 01:25:45.418.-04:00 [INF] Application is Starting
2021-06-26 01:25:46.785.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:25:47.043.-04:00 [FTL] Application startup exception
System.InvalidOperationException: Scheme already exists: Bearer
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__0(AuthenticationOptions o)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.<>c__DisplayClass5_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsManager`1.Get(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2021-06-26 01:25:47.167.-04:00 [FTL] Application failed to start
System.InvalidOperationException: Scheme already exists: Bearer
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__0(AuthenticationOptions o)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.<>c__DisplayClass5_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsManager`1.Get(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at HotelListing.Program.Main(String[] args) in /Users/marksweitzer/Sites/c#/HotelListing/HotelListing/Program.cs:line 28
2021-06-26 01:28:23.232.-04:00 [INF] Application is Starting
2021-06-26 01:28:24.711.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:28:24.971.-04:00 [FTL] Application startup exception
System.InvalidOperationException: Scheme already exists: Bearer
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__0(AuthenticationOptions o)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.<>c__DisplayClass5_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsManager`1.Get(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2021-06-26 01:28:25.105.-04:00 [FTL] Application failed to start
System.InvalidOperationException: Scheme already exists: Bearer
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__0(AuthenticationOptions o)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.<>c__DisplayClass5_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsManager`1.Get(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at HotelListing.Program.Main(String[] args) in /Users/marksweitzer/Sites/c#/HotelListing/HotelListing/Program.cs:line 28
2021-06-26 01:37:16.488.-04:00 [INF] Application is Starting
2021-06-26 01:37:17.877.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:37:18.129.-04:00 [FTL] Application startup exception
System.InvalidOperationException: Scheme already exists: Bearer
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__0(AuthenticationOptions o)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.<>c__DisplayClass5_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsManager`1.Get(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2021-06-26 01:37:18.265.-04:00 [FTL] Application failed to start
System.InvalidOperationException: Scheme already exists: Bearer
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.AspNetCore.Authentication.AuthenticationBuilder.<>c__DisplayClass4_0`2.<AddSchemeHelper>b__0(AuthenticationOptions o)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.<>c__DisplayClass5_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsManager`1.Get(String name)
   at Microsoft.Extensions.Options.OptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at HotelListing.Program.Main(String[] args) in /Users/marksweitzer/Sites/c#/HotelListing/HotelListing/Program.cs:line 28
2021-06-26 01:45:44.867.-04:00 [INF] Application is Starting
2021-06-26 01:45:46.193.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:45:46.696.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 01:45:46.696.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 01:45:46.696.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 01:45:46.696.-04:00 [INF] Hosting environment: Development
2021-06-26 01:45:46.696.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 01:45:47.958.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 01:45:48.066.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 110.2405ms
2021-06-26 01:45:48.278.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 01:45:48.374.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 95.9333ms
2021-06-26 01:46:02.229.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 01:46:02.235.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:46:02.382.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=scope and Claim.Value is one of the following values: (HotelListingAPI)
2021-06-26 01:46:02.387.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:46:02.388.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 401 0 - 159.1482ms
2021-06-26 01:47:25.513.-04:00 [INF] Application is Starting
2021-06-26 01:47:26.879.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:47:27.338.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 01:47:27.338.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 01:47:27.338.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 01:47:27.338.-04:00 [INF] Hosting environment: Development
2021-06-26 01:47:27.338.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 01:47:28.567.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 01:47:28.667.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 102.2655ms
2021-06-26 01:47:28.874.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 01:47:28.962.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 87.8224ms
2021-06-26 01:47:39.593.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 88
2021-06-26 01:47:39.599.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:47:39.720.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=scope and Claim.Value is one of the following values: (HotelListingAPI)
2021-06-26 01:47:39.724.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:47:39.724.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 88 - 401 0 - 131.2482ms
2021-06-26 01:47:52.491.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 01:47:52.491.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:47:52.495.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=scope and Claim.Value is one of the following values: (HotelListingAPI)
2021-06-26 01:47:52.495.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:47:52.496.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 401 0 - 4.7233ms
2021-06-26 01:47:56.171.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 01:47:56.172.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:47:56.172.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=scope and Claim.Value is one of the following values: (HotelListingAPI)
2021-06-26 01:47:56.173.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:47:56.173.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 401 0 - 1.5268ms
2021-06-26 01:47:57.457.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 01:47:57.457.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:47:57.457.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=scope and Claim.Value is one of the following values: (HotelListingAPI)
2021-06-26 01:47:57.457.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:47:57.457.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 401 0 - 0.5641ms
2021-06-26 01:48:09.674.-04:00 [INF] Application is Starting
2021-06-26 01:48:10.906.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:48:11.338.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 01:48:11.338.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 01:48:11.339.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 01:48:11.339.-04:00 [INF] Hosting environment: Development
2021-06-26 01:48:11.339.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 01:48:12.526.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 01:48:12.624.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 100.4704ms
2021-06-26 01:48:12.842.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 01:48:12.940.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 97.7769ms
2021-06-26 01:48:17.947.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 01:48:17.953.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:48:18.129.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 01:48:18.174.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 01:48:18.694.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 01:48:19.355.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 01:48:20.118.-04:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 01:48:20.276.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 01:48:20.376.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 01:48:20.417.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2239.442ms
2021-06-26 01:48:20.418.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 01:48:20.423.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 349 application/json;+charset=utf-8 2475.7662ms
2021-06-26 01:48:37.645.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 01:48:37.653.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:48:37.657.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:48:37.658.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 12.7238ms
2021-06-26 01:49:10.977.-04:00 [INF] Application is Starting
2021-06-26 01:49:12.307.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:49:12.714.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 01:49:12.714.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 01:49:12.714.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 01:49:12.714.-04:00 [INF] Hosting environment: Development
2021-06-26 01:49:12.714.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 01:49:13.913.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 01:49:14.014.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 103.7438ms
2021-06-26 01:49:14.234.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 01:49:14.324.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 90.3979ms
2021-06-26 01:49:26.403.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 01:49:26.409.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:49:26.537.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=scope and Claim.Value is one of the following values: (HotelListingAPI)
2021-06-26 01:49:26.540.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:49:26.541.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 401 0 - 138.1434ms
2021-06-26 01:52:24.985.-04:00 [INF] Application is Starting
2021-06-26 01:52:26.337.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:52:26.844.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 01:52:26.844.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 01:52:26.844.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 01:52:26.844.-04:00 [INF] Hosting environment: Development
2021-06-26 01:52:26.845.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 01:52:28.080.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 01:52:28.173.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 94.5092ms
2021-06-26 01:52:28.383.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 01:52:28.467.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 84.4408ms
2021-06-26 01:52:37.248.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 01:52:37.254.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:52:37.401.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=scope and Claim.Value is one of the following values: (api1)
2021-06-26 01:52:37.406.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:52:37.407.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 401 0 - 158.5715ms
2021-06-26 01:54:44.003.-04:00 [INF] Application is Starting
2021-06-26 01:54:45.318.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 01:54:45.771.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 01:54:45.771.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 01:54:45.771.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 01:54:45.771.-04:00 [INF] Hosting environment: Development
2021-06-26 01:54:45.771.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 01:54:46.976.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 01:54:47.077.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 103.2727ms
2021-06-26 01:54:47.291.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 01:54:47.377.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 86.4317ms
2021-06-26 01:55:06.745.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 01:55:06.751.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:55:06.877.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:55:06.881.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:55:06.882.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 401 0 - 137.0533ms
2021-06-26 01:55:31.882.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 01:55:31.882.-04:00 [INF] CORS policy execution successful.
2021-06-26 01:55:31.890.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 01:55:31.890.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 01:55:31.890.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 401 0 - 8.3594ms
2021-06-26 02:07:04.921.-04:00 [INF] Application is Starting
2021-06-26 02:07:06.377.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 02:07:06.927.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 02:07:06.928.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 02:07:06.928.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 02:07:06.928.-04:00 [INF] Hosting environment: Development
2021-06-26 02:07:06.928.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 02:07:08.143.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 02:07:08.244.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 103.5789ms
2021-06-26 02:07:08.475.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 02:07:08.566.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 90.7360ms
2021-06-26 02:07:19.114.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 02:07:19.119.-04:00 [INF] CORS policy execution successful.
2021-06-26 02:07:19.273.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 02:07:19.310.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 02:07:19.821.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 02:07:20.534.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 02:07:21.280.-04:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 02:07:21.463.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 02:07:21.568.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 02:07:21.610.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2294.8335ms
2021-06-26 02:07:21.610.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 02:07:21.616.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 349 application/json;+charset=utf-8 2501.7972ms
2021-06-26 02:07:31.489.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 02:07:31.497.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 02:07:31.502.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 02:07:31.502.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 12.8474ms
2021-06-26 02:07:52.158.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-06-26 02:07:52.160.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 02:07:52.163.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 02:07:52.163.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 5.6862ms
2021-06-26 02:10:44.835.-04:00 [INF] Application is Starting
2021-06-26 02:10:46.337.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 02:10:46.962.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 02:10:46.962.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 02:10:46.962.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 02:10:46.962.-04:00 [INF] Hosting environment: Development
2021-06-26 02:10:46.962.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 02:10:48.202.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 02:10:48.310.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 110.1661ms
2021-06-26 02:10:48.563.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 02:10:48.657.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 92.1920ms
2021-06-26 02:11:01.082.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 02:11:01.088.-04:00 [INF] CORS policy execution successful.
2021-06-26 02:11:01.226.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 02:11:01.260.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 02:11:01.719.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 02:11:02.432.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 02:11:03.130.-04:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 02:11:03.298.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 02:11:03.395.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 02:11:03.436.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 2171.9139ms
2021-06-26 02:11:03.437.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 02:11:03.442.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 349 application/json;+charset=utf-8 2359.8793ms
2021-06-26 02:11:10.975.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 02:11:10.983.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 02:11:10.987.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 02:11:10.987.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 12.1054ms
2021-06-26 02:11:24.399.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 02:11:24.400.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 02:11:24.400.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 02:11:24.400.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 1.8726ms
2021-06-26 02:18:00.792.-04:00 [INF] Application is Starting
2021-06-26 02:18:02.093.-04:00 [INF] User profile is available. Using '/Users/marksweitzer/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-06-26 02:18:02.577.-04:00 [INF] Now listening on: https://localhost:5001
2021-06-26 02:18:02.577.-04:00 [INF] Now listening on: http://localhost:5000
2021-06-26 02:18:02.577.-04:00 [INF] Application started. Press Ctrl+C to shut down.
2021-06-26 02:18:02.578.-04:00 [INF] Hosting environment: Development
2021-06-26 02:18:02.578.-04:00 [INF] Content root path: /Users/marksweitzer/Sites/c#/HotelListing/HotelListing
2021-06-26 02:18:03.846.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/index.html - -
2021-06-26 02:18:03.945.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 101.2282ms
2021-06-26 02:18:04.172.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-06-26 02:18:04.270.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 98.2665ms
2021-06-26 02:18:15.250.-04:00 [INF] Request starting HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55
2021-06-26 02:18:15.255.-04:00 [INF] CORS policy execution successful.
2021-06-26 02:18:15.380.-04:00 [INF] Executing endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 02:18:15.414.-04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelListing.Models.LoginUserDTO) on controller HotelListing.Controllers.AccountController (HotelListing).
2021-06-26 02:18:15.831.-04:00 [INF] Login Attempt for user2@hotels.com
2021-06-26 02:18:16.471.-04:00 [INF] Entity Framework Core 5.0.7 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-06-26 02:18:17.133.-04:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-06-26 02:18:17.287.-04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-06-26 02:18:17.370.-04:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-06-26 02:18:17.405.-04:00 [INF] Executed action HotelListing.Controllers.AccountController.Login (HotelListing) in 1987.6667ms
2021-06-26 02:18:17.406.-04:00 [INF] Executed endpoint 'HotelListing.Controllers.AccountController.Login (HotelListing)'
2021-06-26 02:18:17.411.-04:00 [INF] Request finished HTTP/1.1 POST https://localhost:5001/api/Account/login application/json-patch+json 55 - 202 349 application/json;+charset=utf-8 2160.9450ms
2021-06-26 02:18:55.542.-04:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - -
2021-06-26 02:18:55.555.-04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-06-26 02:18:55.561.-04:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-06-26 02:18:55.561.-04:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/2 - - - 401 0 - 18.6361ms
